<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">News app</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <form class="d-flex" role="search">
              <input id="input" class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button id="search" class="btn btn-outline-success" type="submit">Search</button>
            </form>
          </div>
        </div>
      </nav>

      <div class="container">
        <h1>Welcome to my News App</h1>
        <div class="row newsContent">

       
        <div class="card my-5 mx-5" style="width: 18rem;">
            <img src="..." class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title">Card title</h5>
              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
              <a href="#" class="btn btn-primary">Go somewhere</a>
            </div>
          </div>

        

        </div>
 <div class="d-flex justify-content-around">
        <button type="button" class="btn btn-primary" id="previous">Previous</button>
        <button type="button" class="btn btn-primary" id="next">Next</button>
    </div>
      </div>

    <script >

let currQuery="Hollywood";
let currPage=1;
let apiResponse=[];
   
   async function fetchData(page,query){
        // console.log("Hii");
       

        var url = 'https://newsapi.org/v2/everything?' +
          'q=' +query+
          '&pageSize=20&'+
          'page='+page+
          '&sortBy=popularity&' +
          'apiKey=122b3070377042d0995b29ba60f9b45b';

var req = new Request(url);

let temp = await fetch(req);
let response= await temp.json();
apiResponse=response
// console.log(apiResponse);

let str=``;


for(let i of apiResponse.articles){
    // console.log(i);
    str=str+`  <div class="card my-5 mx-5" style="width: 18rem;">
            <img src="${i.urlToImage}" class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title">${i.title}</h5>
              <p class="card-text">${i.description}</p>
              <a href="${i.url}" target="_blank" class="btn btn-primary">Go somewhere</a>
            </div>
          </div>`
}

document.querySelector(".newsContent").innerHTML=str;
   }

   fetchData(currPage,currQuery);

   search.addEventListener("click",(e)=>{
    e.preventDefault();
    let val=input.value;
    currQuery=val;
    fetchData(currPage,currQuery);
   })
  
   previous.addEventListener("click",(e)=>{
    e.preventDefault();

    if(currPage>1){
    currPage=currPage-1;

    fetchData(currPage,currQuery);

    }
   })
  
   next.addEventListener("click",(e)=>{
    e.preventDefault();

    

    if(currPage<apiResponse.totalResults){
    currPage=currPage+1;

    fetchData(currPage,currQuery);

    }
   })
    </script>
    
</body>


</html>

